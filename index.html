<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPTIFARM | Türkiye Geneli Tarım Planlama</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --green-dark: #2e7d32;
            --green-light: #66bb6a;
            --brown: #795548;
            --cream: #f1f8e9;
            --white: #ffffff;
            --red-cost: #e53935;
            --green-profit: #43a047;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--cream);
            color: #333;
            margin: 0;
            padding: 0;
            background-image: url("https://www.transparenttextures.com/patterns/cubes.png");
        }

        /* HEADER */
        header {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?auto=format&fit=crop&w=1920&q=80');
            background-size: cover;
            background-position: center;
            padding: 60px 20px;
            text-align: center;
            color: white;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        header h1 { font-size: 3rem; margin: 0; text-transform: uppercase; letter-spacing: 2px; }
        header p { font-size: 1.2rem; margin-top: 10px; opacity: 0.9; }

        /* CONTAINER */
        .container { max-width: 1200px; margin: -40px auto 40px; padding: 0 20px; position: relative; z-index: 10; }

        /* INPUT CARD */
        .input-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-top: 5px solid var(--green-dark);
        }

        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        
        label { display: block; margin-bottom: 8px; color: var(--brown); font-weight: bold; }
        select, input {
            width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 8px; font-size: 1rem; box-sizing: border-box;
        }
        select:focus, input:focus { border-color: var(--green-light); outline: none; }

        .btn-calc {
            background: var(--green-dark); color: white; border: none; padding: 15px 40px;
            border-radius: 50px; font-size: 1.1rem; cursor: pointer; font-weight: bold;
            margin-top: 25px; width: 100%; transition: 0.3s;
        }
        .btn-calc:hover { background: #1b5e20; transform: translateY(-2px); }

        /* RESULTS SECTION */
        .results-section { display: none; animation: slideUp 0.6s ease; margin-top: 30px; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .section-title {
            text-align: center; color: var(--green-dark); font-size: 1.8rem; margin: 40px 0 20px;
            border-bottom: 2px solid #ddd; padding-bottom: 10px;
        }

        /* CARDS GRID */
        .cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }

        /* DETAIL CARD DESIGN */
        .detail-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .detail-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }

        .card-header {
            padding: 15px; color: white; font-weight: bold; font-size: 1.2rem; display: flex; align-items: center; justify-content: space-between;
        }
        .header-crop { background: linear-gradient(to right, #4caf50, #8bc34a); }
        .header-animal { background: linear-gradient(to right, #795548, #a1887f); }

        .card-body { padding: 20px; }

        .stat-row {
            display: flex; justify-content: space-between; margin-bottom: 12px; border-bottom: 1px dashed #eee; padding-bottom: 5px;
        }
        .stat-label { color: #666; font-size: 0.9rem; }
        .stat-val { font-weight: bold; color: #333; }
        
        .cost-text { color: var(--red-cost); }
        .profit-text { color: var(--green-profit); }

        .equip-list {
            background: #fafafa; padding: 10px; border-radius: 8px; font-size: 0.85rem; margin-top: 15px; color: #555;
        }
        .equip-list i { color: var(--green-dark); margin-right: 5px; }

        /* MARKET TABLE */
        .market-box { background: white; padding: 20px; border-radius: 12px; margin-top: 40px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 15px; background: #f5f5f5; color: #555; }
        td { padding: 15px; border-bottom: 1px solid #eee; }
        .tag { padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
        
    </style>
</head>
<body>

<header>
    <h1>OPTIFARM</h1>
    <p>81 İl İçin Özelleştirilmiş Tarımsal Veri Analizi</p>
</header>

<div class="container">
    
    <!-- GİRİŞ FORMU -->
    <div class="input-card">
        <h2 style="margin-top:0; color:var(--green-dark);"><i class="fas fa-search-location"></i> Arazi Analizi</h2>
        <div class="form-grid">
            <div>
                <label>Bölge Seçimi</label>
                <select id="regionSelect" onchange="updateCities()">
                    <option value="">-- Bölge Seçiniz --</option>
                    <option value="marmara">Marmara Bölgesi</option>
                    <option value="ic_anadolu">İç Anadolu Bölgesi</option>
                    <option value="ege">Ege Bölgesi</option>
                    <option value="akdeniz">Akdeniz Bölgesi</option>
                    <option value="karadeniz">Karadeniz Bölgesi</option>
                    <option value="dogu">Doğu Anadolu Bölgesi</option>
                    <option value="guneydogu">Güneydoğu Anadolu Bölgesi</option>
                </select>
            </div>
            <div>
                <label>Şehir</label>
                <select id="citySelect" disabled><option>-- Önce Bölge Seçiniz --</option></select>
            </div>
            <div>
                <label>Arazi Büyüklüğü (Dönüm)</label>
                <input type="number" id="landSize" placeholder="Örn: 50">
            </div>
        </div>
        <button class="btn-calc" onclick="calculateAll()">Bölgeye Uygun Analizi Başlat</button>
    </div>

    <!-- SONUÇLAR -->
    <div id="results" class="results-section">
        
        <!-- BİTKİSEL ÜRETİM -->
        <h3 class="section-title"><i class="fas fa-seedling"></i> Bölgeniz İçin Önerilen Bitkiler</h3>
        <p style="text-align:center; color:#666; margin-bottom:20px;">Seçilen ilin iklim ve toprak yapısına en uygun ürünlerin maliyet analizi:</p>
        
        <div class="cards-grid" id="cropResults">
            <!-- JS BURAYI DOLDURACAK -->
        </div>

        <!-- HAYVANSAL ÜRETİM -->
        <h3 class="section-title"><i class="fas fa-paw"></i> Bölgeniz İçin Önerilen Hayvancılık</h3>
        <p style="text-align:center; color:#666; margin-bottom:20px;">Arazi kapasitesine göre tahmini bakım maliyetleri ve gelir analizi:</p>
        
        <div class="cards-grid" id="animalResults">
            <!-- JS BURAYI DOLDURACAK -->
        </div>

    </div>

    <!-- PAZAR YERİ -->
    <div class="market-box">
        <h3 style="margin-top:0; color:var(--green-dark);"><i class="fas fa-users"></i> İşgücü İlanları</h3>
        <table>
            <thead>
                <tr>
                    <th>Tür</th>
                    <th>İsim / Firma</th>
                    <th>Konum</th>
                    <th>Detay</th>
                    <th>İletişim</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="tag" style="background:#e3f2fd; color:#1565c0;">İşçi</span></td>
                    <td>Mustafa Yılmaz</td>
                    <td>Adana, Mersin</td>
                    <td>Traktör ehliyeti var, tecrübeli</td>
                    <td>Ara</td>
                </tr>
                <tr>
                    <td><span class="tag" style="background:#e8f5e9; color:#2e7d32;">İşveren</span></td>
                    <td>Yeşil Vadi Tarım</td>
                    <td>Konya</td>
                    <td>Hasat dönemi için 10 kişi aranıyor</td>
                    <td>Ara</td>
                </tr>
            </tbody>
        </table>
    </div>

</div>

<script>
    // --- 81 İL VERİ TABANI ---
    const citiesByRegion = {
        "marmara": ["Edirne", "Kırklareli", "Tekirdağ", "İstanbul", "Kocaeli", "Yalova", "Sakarya", "Bilecik", "Bursa", "Balıkesir", "Çanakkale"],
        "ic_anadolu": ["Aksaray", "Ankara", "Çankırı", "Eskişehir", "Karaman", "Kırıkkale", "Kırşehir", "Konya", "Nevşehir", "Niğde", "Sivas", "Yozgat", "Kayseri"],
        "ege": ["İzmir", "Manisa", "Aydın", "Denizli", "Kütahya", "Afyonkarahisar", "Uşak", "Muğla"],
        "akdeniz": ["Adana", "Osmaniye", "Antalya", "Burdur", "Hatay", "Isparta", "Mersin (İçel)", "Kahramanmaraş"],
        "karadeniz": ["Rize", "Trabzon", "Artvin", "Sinop", "Tokat", "Çorum", "Amasya", "Samsun", "Zonguldak", "Bolu", "Düzce", "Karabük", "Bartın", "Kastamonu", "Bayburt", "Giresun", "Gümüşhane", "Ordu"],
        "dogu": ["Ağrı", "Ardahan", "Bingöl", "Bitlis", "Elazığ", "Erzincan", "Erzurum", "Hakkari", "Iğdır", "Kars", "Malatya", "Muş", "Tunceli", "Van", "Şırnak"],
        "guneydogu": ["Adıyaman", "Batman", "Diyarbakır", "Gaziantep", "Kilis", "Mardin", "Siirt", "Şanlıurfa"]
    };

    // --- BÖLGESEL ÜRÜN & HAYVAN VERİLERİ (GELİŞMİŞ) ---
    const regionalData = {
        "marmara": {
            crops: [
                { name: "Ayçiçeği", water: 450, fuel: 12, equip: "Ekim Makinesi, Biçerdöver", desc: "Trakya bölgesi için en verimli yağlık ürün." },
                { name: "Pirinç (Çeltik)", water: 2000, fuel: 20, equip: "Lazerli Tesviye, Biçerdöver", desc: "Edirne ve çevresi için yüksek gelirli." }
            ],
            animals: [
                { name: "Süt İneği (Holstein)", feedCost: 16000, waterCost: 800, revenue: 50000, product: "Yüksek Süt Verimi" },
                { name: "Kümes Hayvancılığı", feedCost: 500, waterCost: 50, revenue: 1200, product: "Et veya Yumurta" }
            ]
        },
        "ic_anadolu": {
            crops: [
                { name: "Buğday", water: 350, fuel: 12, equip: "Traktör, Mibzer, Biçerdöver", desc: "Kuru tarıma uygun, bölgenin temel ürünü." },
                { name: "Şeker Pancarı", water: 1100, fuel: 18, equip: "Çapa ve Söküm Makinesi", desc: "Sulak alanlarda yüksek getiri sağlar." }
            ],
            animals: [
                { name: "Merinos Koyunu", feedCost: 2500, waterCost: 100, revenue: 6000, product: "Yün + Et + Süt" },
                { name: "Besi Sığırcılığı", feedCost: 18000, waterCost: 500, revenue: 38000, product: "Karkas Et Satışı" }
            ]
        },
        "ege": {
            crops: [
                { name: "Zeytin", water: 300, fuel: 8, equip: "Hasat Makinesi, Budama", desc: "Uzun ömürlü, yağı değerli." },
                { name: "Üzüm (Bağ)", water: 400, fuel: 10, equip: "Bağ Traktörü", desc: "Kuru üzüm ihracat potansiyeli yüksek." }
            ],
            animals: [
                { name: "Kıl Keçisi", feedCost: 1800, waterCost: 80, revenue: 4500, product: "Süt + Et" },
                { name: "Arıcılık", feedCost: 200, waterCost: 20, revenue: 3500, product: "Çam Balı Üretimi" }
            ]
        },
        "akdeniz": {
            crops: [
                { name: "Mısır (Dane)", water: 800, fuel: 15, equip: "Pnömatik Ekim, Biçerdöver", desc: "Sıcak iklim sever, yılda 2 ürün alınabilir." },
                { name: "Pamuk", water: 950, fuel: 16, equip: "Pamuk Toplama Makinesi", desc: "Çukurova'nın beyaz altını." }
            ],
            animals: [
                { name: "Kıl Keçisi", feedCost: 1500, waterCost: 80, revenue: 4200, product: "Maki bitki örtüsüne uygun." }
            ]
        },
        "karadeniz": {
            crops: [
                { name: "Fındık", water: 600, fuel: 8, equip: "Tırpan, Toplama Makinesi", desc: "Eğimli arazide dünya lideri ürün." },
                { name: "Çay", water: 1500, fuel: 5, equip: "Çay Makası, Budama", desc: "Nemli ve yağışlı bölgeye özel." }
            ],
            animals: [
                { name: "Jersey İneği", feedCost: 14000, waterCost: 600, revenue: 45000, product: "Yağlı Süt Satışı" },
                { name: "Arıcılık (Anzer)", feedCost: 250, waterCost: 20, revenue: 5000, product: "Değerli Bal Üretimi" }
            ]
        },
        "dogu": {
            crops: [
                { name: "Arpa", water: 300, fuel: 10, equip: "Traktör, Mibzer", desc: "Soğuğa dayanıklı, hayvan yemi." },
                { name: "Yem Bitkileri (Yonca)", water: 800, fuel: 12, equip: "Balya Makinesi", desc: "Hayvancılık için kritik önemde." }
            ],
            animals: [
                { name: "Büyükbaş Besi", feedCost: 17000, waterCost: 500, revenue: 36000, product: "Karkas Et" },
                { name: "Kars Çoban Köpeği", feedCost: 1000, waterCost: 50, revenue: 0, product: "Sürü Koruma (Gider)" }
            ]
        },
        "guneydogu": {
            crops: [
                { name: "Antep Fıstığı", water: 200, fuel: 6, equip: "Hasat Makinesi", desc: "Kuraklığa dayanıklı, getirisi çok yüksek." },
                { name: "Kırmızı Mercimek", water: 250, fuel: 10, equip: "Biçerdöver", desc: "Kurak alanlarda en iyi verim." }
            ],
            animals: [
                { name: "Koyun (İvesi)", feedCost: 2200, waterCost: 90, revenue: 5800, product: "Süt verimi yüksek ırk." }
            ]
        }
    };

    // --- FONKSİYONLAR ---

    function updateCities() {
        const region = document.getElementById("regionSelect").value;
        const citySelect = document.getElementById("citySelect");
        citySelect.innerHTML = '<option value="">-- Şehir Seçiniz --</option>';
        
        if (citiesByRegion[region]) {
            citiesByRegion[region].forEach(c => {
                let opt = document.createElement("option");
                opt.value = c; opt.innerText = c;
                citySelect.add(opt);
            });
            citySelect.disabled = false;
        } else {
            citySelect.disabled = true;
        }
    }

    function calculateAll() {
        const land = parseFloat(document.getElementById("landSize").value);
        const region = document.getElementById("regionSelect").value;
        const city = document.getElementById("citySelect").value;
        
        if (!land || !region || !city) { alert("Lütfen Bölge, Şehir ve Arazi bilgilerini giriniz."); return; }

        // Bölge verilerini çek
        const data = regionalData[region] || regionalData["ic_anadolu"]; // Default fallback

        // 1. Bitki Hesaplamaları
        let cropHTML = "";
        data.crops.forEach(crop => {
            const totalFuel = (land * crop.fuel * 42).toLocaleString(); // 42 TL Mazot
            const totalWater = (land * crop.water).toLocaleString();
            const tractors = Math.ceil(land / 400);

            cropHTML += `
                <div class="detail-card">
                    <div class="card-header header-crop">
                        <span><i class="fas fa-wheat"></i> ${crop.name}</span>
                        <small style="opacity:0.8">${land} Dönüm</small>
                    </div>
                    <div class="card-body">
                        <p style="font-size:0.9rem; color:#666;">${crop.desc}</p>
                        <div class="stat-row">
                            <span class="stat-label">Toplam Mazot Gideri:</span>
                            <span class="stat-val cost-text">${totalFuel} TL</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Su İhtiyacı (Sezon):</span>
                            <span class="stat-val">${totalWater} Ton</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Gerekli Traktör:</span>
                            <span class="stat-val">${tractors} Adet</span>
                        </div>
                        <div class="equip-list">
                            <strong><i class="fas fa-tools"></i> Gerekli Ekipmanlar:</strong><br>
                            ${crop.equip}
                        </div>
                    </div>
                </div>
            `;
        });
        document.getElementById("cropResults").innerHTML = cropHTML;

        // 2. Hayvan Hesaplamaları
        let animalHTML = "";
        data.animals.forEach(animal => {
            // Adet hesaplama (10 dönüme kaç hayvan sığar/bakılır tahmini)
            let count = animal.name.includes("Arı") ? land * 2 : (animal.name.includes("Koyun") || animal.name.includes("Keçi") ? land * 3 : Math.ceil(land / 2));
            if(count < 1) count = 1;

            const totalFeed = (count * animal.feedCost).toLocaleString();
            const totalRev = (count * animal.revenue).toLocaleString();
            
            animalHTML += `
                <div class="detail-card">
                    <div class="card-header header-animal">
                        <span><i class="fas fa-paw"></i> ${animal.name}</span>
                        <small style="opacity:0.8">${count} Adet (Kapasite)</small>
                    </div>
                    <div class="card-body">
                        <p style="font-size:0.9rem; color:#666;">${animal.product} üzerinden hesaplanmıştır.</p>
                        <div class="stat-row">
                            <span class="stat-label">Yıllık Yem Gideri:</span>
                            <span class="stat-val cost-text">${totalFeed} TL</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Su Tüketimi (Yıllık):</span>
                            <span class="stat-val">${(count * animal.waterCost).toLocaleString()} Litre</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Tahmini Gelir:</span>
                            <span class="stat-val profit-text">+${totalRev} TL</span>
                        </div>
                    </div>
                </div>
            `;
        });
        document.getElementById("animalResults").innerHTML = animalHTML;

        // Göster
        document.getElementById("results").style.display = "block";
        document.getElementById("results").scrollIntoView({ behavior: 'smooth' });
    }
</script>

</body>
</html>
